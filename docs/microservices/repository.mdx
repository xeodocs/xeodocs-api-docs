---
title: Repository Service
description: Overview of the Repository microservice in XeoDocs' architecture, handling Git operations and file management for documentation projects.
template: doc
---

The Repository Service is a core microservice in XeoDocs. Developed in Golang, this service handles all Git interactions and file management for projects, called internally by the Worker Service to perform cloning, pulling, and change detection.

## Role in XeoDocs

In XeoDocs' microservices architecture, the Repository Service centralizes Git and file operations:

- **Repository Cloning**: Clones source Git repositories to mounted local volumes for processing.
- **Language Copy Generation**: Creates per-language duplicates on the file system to prepare for translation.
- **File Management**: Tracks files, detects changes via hashes, manages cleanup.
- **Integration**: Called internally by Worker Service for Git ops; adheres to single responsibility, enabling reusability.

This service offloads Git and file handling from other services, improving separation of concerns.

## How It Works

1. **Internal Calls**: Receives requests from Worker Service via private endpoints (e.g., /internal/clone-repo).
2. **Git Operations**: Uses go-git to clone/pull repositories to mounted volumes (e.g., `./repos:/repos`).
3. **File Processing**: Creates language-specific copies, detects translatable files, tracks changes via hashes.
4. **Metadata Management**: Updates database with file info, handles cleanup on project removal.

Operations are invoked asynchronously by Worker, ensuring no direct user-facing APIs.

## Key Features

- **Git Integration**: Leverages `go-git` for all Git operations, supporting cloning, pulling, and change detection.
- **File Tracking**: Automatically detects and tracks translatable files with hash-based change detection.
- **Private Endpoints**: Exposes internal endpoints for Worker calls, secured with mTLS or API keys.
- **Mounted Volume Handling**: Operates on shared mounted volumes for repository storage and processing.
- **Asynchronous Processing**: Supports background processing for large repository operations.
- **Error Handling**: Implements retries and logging for failed Git operations.

## Repository Service Endpoints

Repository Service provides private APIs for Git and file operations, invoked internally by the Worker Service. Below is a list of its endpoints:

### Repository Management Endpoints
- **POST /internal/clone-repo**: Clone a Git repository, specifying the repository URL and project ID.
- **POST /internal/create-language-copies**: Create language-specific copies of the repository for translation.
- **PUT /internal/sync-repo**: Synchronize the repository with upstream changes (git pull).
- **DELETE /internal/delete-repo**: Remove the repository and all its language copies.

These endpoints are private and secured with mTLS or API keys for service-to-service communication.

## Deployment

- **Docker**: Built via `Dockerfile.repository`; runs in `docker-compose.dev.yml`.
- **Volumes**: Mounts shared volume (e.g., `./repos:/repos`) for file system access.

The Repository Service streamlines Git and file operations in XeoDocs, supporting automated workflows for documentation translation and synchronization.

For related microservices, see [Project Service](/microservices/project) or [Scheduler Service](/microservices/scheduler). Begin with the [Installation Guide](/getting-started/installation).
